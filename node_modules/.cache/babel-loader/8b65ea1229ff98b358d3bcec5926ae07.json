{"ast":null,"code":"import Cookies from 'js-cookie';\nimport qs from 'qs';\nconst BASEAPI = 'http://localhost:5000';\nconst apiFetchPost = async (endpoint, body) => {\n  if (!body.token) {\n    let token = Cookies.get('token');\n    if (token) {\n      body.token = token;\n    }\n  }\n  const res = await fetch(BASEAPI + endpoint, {\n    method: 'POST',\n    headers: {\n      'Accept': 'application/json',\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify(body)\n  });\n  const json = await res.json();\n  if (json.notallowed) {\n    window.location.href = '/signin';\n    return;\n  }\n  return json;\n};\nconst apiFetchGet = async (endpoint, body = []) => {\n  if (!body.token) {\n    let token = Cookies.get('token');\n    if (token) {\n      body.token = token;\n    }\n  }\n  const res = await fetch(`${BASEAPI + endpoint}?${qs.stringify(body)}`);\n  const json = await res.json();\n  if (json.notallowed) {\n    window.location.href = '/signin';\n    return;\n  }\n  return json;\n};\nconst OlxAPI = {\n  login: async (email, password) => {\n    const json = await apiFetchPost('/user/signin', {\n      email,\n      password\n    });\n    return json;\n  },\n  register: async (name, email, password, stateLoc) => {\n    const json = await apiFetchPost('/user/signup', {\n      name,\n      email,\n      password,\n      state: stateLoc\n    });\n    return json;\n  },\n  getStates: async () => {\n    const json = await apiFetchGet('/states');\n    return json.states;\n  },\n  getCategories: async () => {\n    const json = await apiFetchGet('/categories');\n    return json.categories;\n  },\n  getAds: async options => {\n    const json = await apiFetchGet('/ad/list', options);\n    return json;\n  }\n};\nexport default () => OlxAPI;","map":{"version":3,"names":["Cookies","qs","BASEAPI","apiFetchPost","endpoint","body","token","get","res","fetch","method","headers","JSON","stringify","json","notallowed","window","location","href","apiFetchGet","OlxAPI","login","email","password","register","name","stateLoc","state","getStates","states","getCategories","categories","getAds","options"],"sources":["C:/Curso B7WEB/OLX/frontend/src/helpers/OlxAPI.js"],"sourcesContent":["import Cookies from 'js-cookie';\r\nimport qs from 'qs';\r\n\r\nconst BASEAPI = 'http://localhost:5000';\r\n\r\nconst apiFetchPost = async (endpoint, body) => {\r\n    if(!body.token){\r\n        let token = Cookies.get('token');\r\n        if(token){\r\n            body.token = token;\r\n        }\r\n    }\r\n\r\n    const res = await fetch(BASEAPI+endpoint, { \r\n        method: 'POST',\r\n        headers: {\r\n            'Accept' : 'application/json',\r\n            'Content-Type': 'application/json'\r\n        },\r\n        body:JSON.stringify(body)\r\n    });\r\n    const json = await res.json();\r\n\r\n    if(json.notallowed){\r\n        window.location.href = '/signin';\r\n        return;\r\n    }\r\n\r\n    return json;\r\n}\r\n\r\nconst apiFetchGet = async (endpoint, body=[]) => {\r\n    if(!body.token){\r\n        let token = Cookies.get('token');\r\n        if(token){\r\n            body.token = token;\r\n        }\r\n    }\r\n\r\n    const res = await fetch(`${BASEAPI+endpoint}?${qs.stringify(body)}`);\r\n    const json = await res.json();\r\n\r\n    if(json.notallowed){\r\n        window.location.href = '/signin';\r\n        return;\r\n    }\r\n\r\n    return json;\r\n}\r\n\r\nconst OlxAPI = {\r\n\r\n    login:async (email, password) => {\r\n\r\n        const json = await apiFetchPost(\r\n            '/user/signin',\r\n            {email, password}\r\n        );\r\n        return json;\r\n    },\r\n\r\n    register:async (name, email, password, stateLoc) => {\r\n        const json = await apiFetchPost(\r\n            '/user/signup',\r\n            {name, email, password, state:stateLoc}\r\n        );\r\n        return json;\r\n    },\r\n    \r\n    getStates:async () => {\r\n        const json = await apiFetchGet(\r\n            '/states'\r\n        );\r\n        return json.states;\r\n    },\r\n\r\n    getCategories:async () => {\r\n        const json = await apiFetchGet(\r\n            '/categories'\r\n        );\r\n        return json.categories; \r\n    },\r\n\r\n    getAds:async (options) => {\r\n        const json = await apiFetchGet(\r\n            '/ad/list',\r\n            options\r\n        );\r\n        return json;\r\n    }\r\n};\r\n\r\nexport default () => OlxAPI;"],"mappings":"AAAA,OAAOA,OAAO,MAAM,WAAW;AAC/B,OAAOC,EAAE,MAAM,IAAI;AAEnB,MAAMC,OAAO,GAAG,uBAAuB;AAEvC,MAAMC,YAAY,GAAG,MAAAA,CAAOC,QAAQ,EAAEC,IAAI,KAAK;EAC3C,IAAG,CAACA,IAAI,CAACC,KAAK,EAAC;IACX,IAAIA,KAAK,GAAGN,OAAO,CAACO,GAAG,CAAC,OAAO,CAAC;IAChC,IAAGD,KAAK,EAAC;MACLD,IAAI,CAACC,KAAK,GAAGA,KAAK;IACtB;EACJ;EAEA,MAAME,GAAG,GAAG,MAAMC,KAAK,CAACP,OAAO,GAACE,QAAQ,EAAE;IACtCM,MAAM,EAAE,MAAM;IACdC,OAAO,EAAE;MACL,QAAQ,EAAG,kBAAkB;MAC7B,cAAc,EAAE;IACpB,CAAC;IACDN,IAAI,EAACO,IAAI,CAACC,SAAS,CAACR,IAAI;EAC5B,CAAC,CAAC;EACF,MAAMS,IAAI,GAAG,MAAMN,GAAG,CAACM,IAAI,CAAC,CAAC;EAE7B,IAAGA,IAAI,CAACC,UAAU,EAAC;IACfC,MAAM,CAACC,QAAQ,CAACC,IAAI,GAAG,SAAS;IAChC;EACJ;EAEA,OAAOJ,IAAI;AACf,CAAC;AAED,MAAMK,WAAW,GAAG,MAAAA,CAAOf,QAAQ,EAAEC,IAAI,GAAC,EAAE,KAAK;EAC7C,IAAG,CAACA,IAAI,CAACC,KAAK,EAAC;IACX,IAAIA,KAAK,GAAGN,OAAO,CAACO,GAAG,CAAC,OAAO,CAAC;IAChC,IAAGD,KAAK,EAAC;MACLD,IAAI,CAACC,KAAK,GAAGA,KAAK;IACtB;EACJ;EAEA,MAAME,GAAG,GAAG,MAAMC,KAAK,CAAC,GAAGP,OAAO,GAACE,QAAQ,IAAIH,EAAE,CAACY,SAAS,CAACR,IAAI,CAAC,EAAE,CAAC;EACpE,MAAMS,IAAI,GAAG,MAAMN,GAAG,CAACM,IAAI,CAAC,CAAC;EAE7B,IAAGA,IAAI,CAACC,UAAU,EAAC;IACfC,MAAM,CAACC,QAAQ,CAACC,IAAI,GAAG,SAAS;IAChC;EACJ;EAEA,OAAOJ,IAAI;AACf,CAAC;AAED,MAAMM,MAAM,GAAG;EAEXC,KAAK,EAAC,MAAAA,CAAOC,KAAK,EAAEC,QAAQ,KAAK;IAE7B,MAAMT,IAAI,GAAG,MAAMX,YAAY,CAC3B,cAAc,EACd;MAACmB,KAAK;MAAEC;IAAQ,CACpB,CAAC;IACD,OAAOT,IAAI;EACf,CAAC;EAEDU,QAAQ,EAAC,MAAAA,CAAOC,IAAI,EAAEH,KAAK,EAAEC,QAAQ,EAAEG,QAAQ,KAAK;IAChD,MAAMZ,IAAI,GAAG,MAAMX,YAAY,CAC3B,cAAc,EACd;MAACsB,IAAI;MAAEH,KAAK;MAAEC,QAAQ;MAAEI,KAAK,EAACD;IAAQ,CAC1C,CAAC;IACD,OAAOZ,IAAI;EACf,CAAC;EAEDc,SAAS,EAAC,MAAAA,CAAA,KAAY;IAClB,MAAMd,IAAI,GAAG,MAAMK,WAAW,CAC1B,SACJ,CAAC;IACD,OAAOL,IAAI,CAACe,MAAM;EACtB,CAAC;EAEDC,aAAa,EAAC,MAAAA,CAAA,KAAY;IACtB,MAAMhB,IAAI,GAAG,MAAMK,WAAW,CAC1B,aACJ,CAAC;IACD,OAAOL,IAAI,CAACiB,UAAU;EAC1B,CAAC;EAEDC,MAAM,EAAC,MAAOC,OAAO,IAAK;IACtB,MAAMnB,IAAI,GAAG,MAAMK,WAAW,CAC1B,UAAU,EACVc,OACJ,CAAC;IACD,OAAOnB,IAAI;EACf;AACJ,CAAC;AAED,eAAe,MAAMM,MAAM","ignoreList":[]},"metadata":{},"sourceType":"module"}