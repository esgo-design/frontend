{"ast":null,"code":"import Cookies from 'js-cookie';\nimport qs from 'qs';\nconst BASEAPI = 'http://localhost:5000';\nconst apiFetchFile = async (endpoint, body) => {\n  if (!body.token) {\n    let token = Cookies.get('token');\n    if (token) {\n      body.append('token', token);\n    }\n  }\n  const res = await fetch(BASEAPI + endpoint, {\n    method: 'POST',\n    body\n  });\n  const json = await res.json();\n  if (json.notallowed) {\n    window.location.href = '/signin';\n    return;\n  }\n  return json;\n};\nconst apiFetchPost = async (endpoint, body) => {\n  if (!body.token) {\n    let token = Cookies.get('token');\n    if (token) {\n      body.token = token;\n    }\n  }\n  const res = await fetch(BASEAPI + endpoint, {\n    method: 'POST',\n    headers: {\n      'Accept': 'application/json',\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify(body)\n  });\n  const json = await res.json();\n  if (json.notallowed) {\n    window.location.href = '/signin';\n    return;\n  }\n  return json;\n};\nconst apiFetchGet = async (endpoint, body = []) => {\n  if (!body.token) {\n    let token = Cookies.get('token');\n    if (token) {\n      body.token = token;\n    }\n  }\n  const res = await fetch(`${BASEAPI + endpoint}?${qs.stringify(body)}`);\n  const json = await res.json();\n  if (json.notallowed) {\n    window.location.href = '/signin';\n    return;\n  }\n  return json;\n};\nconst OlxAPI = {\n  login: async (email, password) => {\n    const json = await apiFetchPost('/user/signin', {\n      email,\n      password\n    });\n    return json;\n  },\n  register: async (name, email, password, stateLoc) => {\n    const json = await apiFetchPost('/user/signup', {\n      name,\n      email,\n      password,\n      state: stateLoc\n    });\n    return json;\n  },\n  getStates: async () => {\n    const json = await apiFetchGet('/states');\n    return json.states;\n  },\n  getCategories: async () => {\n    const json = await apiFetchGet('/categories');\n    return json.categories;\n  },\n  getAds: async options => {\n    const json = await apiFetchGet('/ad/list', options);\n    return json;\n  },\n  getAd: async (id, other = false) => {\n    const json = await apiFetchGet('/ad/item', {\n      id,\n      other\n    });\n    return json;\n  },\n  addAd: async fData => {\n    const json = await apiFetchFile('/ad/add', fData);\n    return json;\n  }\n};\nexport default () => OlxAPI;","map":{"version":3,"names":["Cookies","qs","BASEAPI","apiFetchFile","endpoint","body","token","get","append","res","fetch","method","json","notallowed","window","location","href","apiFetchPost","headers","JSON","stringify","apiFetchGet","OlxAPI","login","email","password","register","name","stateLoc","state","getStates","states","getCategories","categories","getAds","options","getAd","id","other","addAd","fData"],"sources":["C:/Curso B7WEB/OLX/frontend/src/helpers/OlxAPI.js"],"sourcesContent":["import Cookies from 'js-cookie';\r\nimport qs from 'qs';\r\n\r\nconst BASEAPI = 'http://localhost:5000';\r\n\r\nconst apiFetchFile = async (endpoint, body) => {\r\n    if(!body.token) {\r\n        let token = Cookies.get('token');\r\n        if(token) {\r\n            body.append('token', token);\r\n        }\r\n    }\r\n    const res = await fetch(BASEAPI+endpoint, {\r\n        method:'POST',\r\n        body\r\n    });\r\n    const json = await res.json();\r\n    \r\n    if(json.notallowed) {\r\n        window.location.href = '/signin';\r\n        return;\r\n    }\r\n\r\n    return json;\r\n}\r\n\r\nconst apiFetchPost = async (endpoint, body) => {\r\n    if(!body.token){\r\n        let token = Cookies.get('token');\r\n        if(token){\r\n            body.token = token;\r\n        }\r\n    }\r\n\r\n    const res = await fetch(BASEAPI+endpoint, { \r\n        method: 'POST',\r\n        headers: {\r\n            'Accept' : 'application/json',\r\n            'Content-Type': 'application/json'\r\n        },\r\n        body:JSON.stringify(body)\r\n    });\r\n    const json = await res.json();\r\n\r\n    if(json.notallowed){\r\n        window.location.href = '/signin';\r\n        return;\r\n    }\r\n\r\n    return json;\r\n}\r\n\r\nconst apiFetchGet = async (endpoint, body=[]) => {\r\n    if(!body.token){\r\n        let token = Cookies.get('token');\r\n        if(token){\r\n            body.token = token;\r\n        }\r\n    }\r\n\r\n    const res = await fetch(`${BASEAPI+endpoint}?${qs.stringify(body)}`);\r\n    const json = await res.json();\r\n\r\n    if(json.notallowed){\r\n        window.location.href = '/signin';\r\n        return;\r\n    }\r\n\r\n    return json;\r\n}\r\n\r\nconst OlxAPI = {\r\n\r\n    login:async (email, password) => {\r\n\r\n        const json = await apiFetchPost(\r\n            '/user/signin',\r\n            {email, password}\r\n        );\r\n        return json;\r\n    },\r\n\r\n    register:async (name, email, password, stateLoc) => {\r\n        const json = await apiFetchPost(\r\n            '/user/signup',\r\n            {name, email, password, state:stateLoc}\r\n        );\r\n        return json;\r\n    },\r\n    \r\n    getStates:async () => {\r\n        const json = await apiFetchGet(\r\n            '/states'\r\n        );\r\n        return json.states;\r\n    },\r\n\r\n    getCategories:async () => {\r\n        const json = await apiFetchGet(\r\n            '/categories'\r\n        );\r\n        return json.categories; \r\n    },\r\n\r\n    getAds:async (options) => {\r\n        const json = await apiFetchGet(\r\n            '/ad/list',\r\n            options\r\n        );\r\n        return json;\r\n    },\r\n\r\n    getAd:async (id, other = false) => {\r\n        const json = await apiFetchGet(\r\n            '/ad/item',\r\n            {id, other}\r\n        );\r\n       return json;\r\n    },\r\n\r\n    addAd:async (fData) => {\r\n        const json = await apiFetchFile(\r\n            '/ad/add',\r\n            fData\r\n        );\r\n        return json;\r\n    }\r\n\r\n\r\n};\r\n\r\nexport default () => OlxAPI;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}